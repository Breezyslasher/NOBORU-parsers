DoujinHentai=Parser:new("DoujinHentai","https://www.doujinhentai.net","ESP","DOUJINHENTAIESP",3)DoujinHentai.NSFW=true;local function a(b)return b:gsub("&#([^;]-);",function(c)local d=tonumber("0"..c)or tonumber(c)return d and u8c(d)or"&#"..c..";"end):gsub("&(.-);",function(c)return HTML_entities and HTML_entities[c]and u8c(HTML_entities[c])or"&"..c..";"end)end;local function e(f)local g={}Threads.insertTask(g,{Type="StringRequest",Link=f,Table=g,Index="text"})while Threads.check(g)do coroutine.yield(false)end;return g.text or""end;function DoujinHentai:getManga(f,h)local i=e(f)h.NoPages=true;for j,k,l in i:gmatch('class="col%-sm%-6 col%-md%-3.-href="([^"]-)".-title="(.-)">.-<img%s*data%-src="(.-)" class')do h[#h+1]=CreateManga(a(k:gsub("^Leer ","")),j:gsub("%%","%%%%"):gsub(" ","%%%%20"):match("/manga%-hentai/(.+)$")or" ",l:gsub("%%","%%%%"):gsub(" ","%%%%20"),self.ID,j)h.NoPages=false;coroutine.yield(false)end end;function DoujinHentai:getPopularManga(m,h)self:getManga(self.Link.."/list-manga-hentai?orderby=views&page="..m,h)end;function DoujinHentai:getLatestManga(m,h)self:getManga(self.Link.."/list-manga-hentai?orderby=last&page="..m,h)end;function DoujinHentai:getAZManga(m,h)self:getManga(self.Link.."/list-manga-hentai?page="..m,h)end;function DoujinHentai:searchManga(n,m,h)local i=e(self.Link.."/search?query="..n.."&page="..m)h.NoPages=true;for j,k,l in i:gmatch('class="tab%-thumb c%-image%-hover">.-href="([^"]-)" title="(.-)">.-data%-src=\'([^\']-)\'')do h[#h+1]=CreateManga(a(k:gsub("^Leer ","")),j:gsub("%%","%%%%"):gsub(" ","%%%%20"):match("/manga%-hentai/(.+)$")or" ",l:gsub("%%","%%%%"):gsub(" ","%%%%20"),self.ID,j)h.NoPages=false;coroutine.yield(false)end end;function DoujinHentai:getChapters(o,h)local i=e(self.Link.."/manga-hentai/"..o.Link)local p={}for j,k in i:gmatch('ion%-ios%-play">.-href="(.-)">(.-)</a>')do j=j:gsub("%%","%%%%"):gsub(" ","%%%%20")p[#p+1]={Name=a(k),Link=j:match("/([^/]-)$"),Pages={},Manga=o}end;for q=#p,1,-1 do h[#h+1]=p[q]end end;function DoujinHentai:prepareChapter(r,h)local i=e(self.Link.."/manga-hentai/"..r.Manga.Link.."/"..r.Link)for j in i:match('id="all"(.-)id="ppp"'):gmatch("data%-src=' (.-) '")do h[#h+1]=j end end;function DoujinHentai:loadChapterPage(f,h)h.Link=f end