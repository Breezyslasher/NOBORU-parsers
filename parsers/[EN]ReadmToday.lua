ReadmToday=Parser:new("Readm","https://readm.today","ENG","READMTODAYENG",1)ReadmToday.Tags={"Action","Adventure","Comedy","Cooking","Doujinshi","Drama","Ecchi","Fantasy","Gender Bender","Harem","Historical","Horror","Isekai","Josei","Lolicon","Magic","Manga","Manhua","Manhwa","Martial Arts","Mature","Mecha","Mind Game","Mystery","None","One shot","Psychological","Reincarnation","Romance","School Life","Sci fi","Seinen","Shotacon","Shoujo","Shoujo Ai","Shounen","Shounen Ai","Slice of Life","Sports","Supernatural","Time Travel","Tragedy","Uncategorized","Yaoi","Yuri"}ReadmToday.TagValues={["Action"]="action",["Adventure"]="adventure",["Comedy"]="comedy",["Cooking"]="cooking",["Doujinshi"]="doujinshi",["Drama"]="drama",["Ecchi"]="ecchi",["Fantasy"]="fantasy",["Gender Bender"]="gender-bender",["Harem"]="harem",["Historical"]="historical",["Horror"]="horror",["Isekai"]="isekai",["Josei"]="josei",["Lolicon"]="lolicon",["Magic"]="magic",["Manga"]="manga",["Manhua"]="manhua",["Manhwa"]="manhwa",["Martial Arts"]="martial-arts",["Mature"]="mature",["Mecha"]="mecha",["Mind Game"]="mind-game",["Mystery"]="mystery",["None"]="none",["One shot"]="one-shot",["Psychological"]="psychological",["Reincarnation"]="reincarnation",["Romance"]="romance",["School Life"]="school-life",["Sci fi"]="sci-fi",["Seinen"]="seinen",["Shotacon"]="shotacon",["Shoujo"]="shoujo",["Shoujo Ai"]="shoujo-ai",["Shounen"]="shounen",["Shounen Ai"]="shounen-ai",["Slice of Life"]="slice-of-life",["Sports"]="sports",["Supernatural"]="supernatural",["Time Travel"]="time-travel",["Tragedy"]="tragedy",["Uncategorized"]="uncategorized",["Yaoi"]="yaoi",["Yuri"]="yuri"}function ReadmToday:_getPopularUrl(a)a=a or 1;return self.Link..'/popular-manga/'..a end;function ReadmToday:_getSearchUrl(b)b=b or''return self.Link..'/searchController/index?search='..b end;function ReadmToday:_getLatestUrl(a)a=a or 1;return self.Link..'/latest-releases/'..a end;function ReadmToday:_getTagUrl(a,c)a=a or 1;c=c or self.Tags[1]or''local d=self.TagValues[c]if c==nil then Notifications.push("Error while getting tag value")return end;return self.Link..'/category/'..d..'/watch/'..a end;local function e(f)if u8c then return f:gsub("&#([^;]-);",function(g)local h=tonumber("0"..g)or tonumber(g)return h and u8c(h)or"&#"..g..";"end):gsub("&([^;]-);",function(g)return HTML_entities and HTML_entities[g]and u8c(HTML_entities[g])or"&"..g..";"end)else return f end end;local function i(j)local k={}Threads.insertTask(k,{Type="StringRequest",Link=j,Table=k,Index="string"})while Threads.check(k)do coroutine.yield(false)end;return k.string or""end;function ReadmToday:getManga(j,l)local m=i(j)l.NoPages=true;for n,o,p in m:gmatch('article.-href=".-/(%d-)".-src="(%S-)".-entry%-title">.-<a href.->(.-)</a>')do l[#l+1]=CreateManga(e(p:gsub("<[^>]->","")),n,o:gsub("%%","%%%%"),self.ID,self.Link.."/hc.fyi/"..n)l.NoPages=false;coroutine.yield(false)end end;function ReadmToday:getLatestManga(a,l)local j=self:_getLatestUrl(a)local m=i(j)l.NoPages=true;for n,p,o in m:gmatch('truncate">%s*<a href="([^"]*)"[^>]*>%s-(.-)%s-</a>.-data%-src="([^"]*)"')do l[#l+1]=CreateManga(e(p:gsub("<[^>]->","")),n,self.Link..o:gsub("%%","%%%%"),self.ID,self.Link..n)l.NoPages=false;coroutine.yield(false)end end;function ReadmToday:getPopularManga(a,l)local j=self:_getPopularUrl(a)local m=i(j)l.NoPages=true;for o,n,p in m:gmatch('poster%-with%-subject">.-src="([^"]*)".-href="(/manga/[^"]-)".-class="truncate">%s*(.-)%s*</h2>')do l[#l+1]=CreateManga(e(p:gsub("<[^>]->","")),n,self.Link..o:gsub("%%","%%%%"),self.ID,self.Link..n)l.NoPages=false;coroutine.yield(false)end end;function ReadmToday:searchManga(q,a,l)local j=self:_getSearchUrl(q)local m=i(j)l.NoPages=true;for n,p,o in m:gmatch('href="(/manga/[^"]*)".-poster%-subject.-truncate">%s*(.-)%s*</h2.-data%-src="(/uploads/chapter_files/[^"]*)"')do l[#l+1]=CreateManga(e(p:gsub("<[^>]->","")),n,self.Link..o:gsub("%%","%%%%"),self.ID,self.Link..n)l.NoPages=false;coroutine.yield(false)end end;function ReadmToday:getTagManga(a,l,c)local j=self:_getTagUrl(a,c)if j==nil then return end;local m=i(j)l.NoPages=true;for o,n,p in m:gmatch('poster%-with%-subject">.-data%-src="([^"]*)".-href="(/manga/[^"]-)".-class="truncate">%s*(.-)%s*</h2>')do l[#l+1]=CreateManga(e(p:gsub("<[^>]->","")),n,self.Link..o:gsub("%%","%%%%"),self.ID,self.Link..n)l.NoPages=false;coroutine.yield(false)end end;function ReadmToday:getChapters(r,l)local m=i(self.Link..r.Link)local s=m:match('desc">%s*<p>(.*)</p>.-media%-meta')or""r.NewImageLink=self.Link..(m:match('series%-profile%-thumb" src="([^"]-)" alt')or'')l.Description=e(s):match('^%s*(.*)%s*$'):gsub('<[^>]->','')or""for j,t in m:gmatch('truncate"><a href="([^"]-)/all%-pages"[^>]*>%s*(.-)%s*</a>')do l[#l+1]={Name=t,Link=j,Pages={},Manga=r}end end;function ReadmToday:prepareChapter(u,l)local m=i(self.Link..u.Link.."/all-pages")for j in m:gmatch('img src="(/uploads/chapter_files/[^"]-)"')do l[#l+1]=self.Link..j:gsub("\\/","/"):gsub("%%","%%%%")end end;function ReadmToday:loadChapterPage(j,l)l.Link=j end