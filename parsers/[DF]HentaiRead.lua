HentaiRead=Parser:new("HentaiRead","https://hentairead.com","DIF","HENREADDIF",4)HentaiRead.NSFW=true;local function a(b)return b:gsub("&#([^;]-);",function(c)local d=tonumber("0"..c)or tonumber(c)return d and u8c(d)or"&#"..c..";"end):gsub("&(.-);",function(c)return HTML_entities and HTML_entities[c]and u8c(HTML_entities[c])or"&"..c..";"end)end;local function e(f)local g={}Threads.insertTask(g,{Type="StringRequest",Link=f,Table=g,Index="text"})while Threads.check(g)do coroutine.yield(false)end;return g.text or""end;function HentaiRead:getManga(f,h,i)local j=e(f)h.NoPages=true;local k='manga%-item__img.-alt="([^"]+)"[^>]*src="([^"]+)".-/hentai/([^/]+)/'for l,m,n in j:gmatch(k)do h[#h+1]=CreateManga(a(l),n,m,self.ID,self.Link.."/hentai/"..n)h.NoPages=false;coroutine.yield(false)end end;function HentaiRead:getLatestManga(o,h)self:getManga(self.Link.."/hentai/page/"..o.."/?m_orderby=latest&m_order=desc",h)end;function HentaiRead:getPopularManga(o,h)self:getManga(self.Link.."/hentai/page/"..o.."/?m_orderby=views&m_order=desc",h)end;function HentaiRead:searchManga(p,o,h)self:getManga(self.Link.."/page/"..o.."/?s="..p.."&post_type=wp-manga&verified=1",h,true)end;function HentaiRead:getChapters(q,h)h[#h+1]={Name="Read chapter",Link=q.Link,Pages={},Manga=q}end;function HentaiRead:prepareChapter(r,h)local j=e(self.Link.."/hentai/"..r.Link.."/english")local s,t=j:match('"currentId"%s*:%s*(%d*).-"chapterId"%s*:%s*(%d*)')local u=j:match('Page 1 of (%d*)')print(s,t,u)for v=1,u do h[#h+1]={Link="https://henread.xyz/"..s.."/"..t..("/hr_%04d.jpg"):format(v),Header1="Referer: "..self.Link}end end;function HentaiRead:loadChapterPage(f,h)h.Link=f end